<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generator Danych Karty</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .container { max-width: 500px; margin: auto; }
    input, button { margin: 10px 0; padding: 10px; width: 100%; }
    .output { margin-top: 20px; font-weight: bold; white-space: pre-wrap; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Generator Danych Karty</h1>
    <label for="prefix">Wprowadź prefiks (np. 4 dla Visa):</label>
    <input type="text" id="prefix" placeholder="Prefiks (opcjonalny)" />
    <button onclick="generateData()">Generuj Dane</button>
    <div class="output" id="output"></div>
  </div>

  <script>
    function generateData() {
      const prefix = document.getElementById('prefix').value || '';
      const cardLength = 16;
      let cardNumber = prefix;

      // Generowanie numeru karty
      while (cardNumber.length < cardLength - 1) {
        cardNumber += Math.floor(Math.random() * 10).toString();
      }
      const checkDigit = calculateLuhnCheckDigit(cardNumber);
      cardNumber += checkDigit;

      // Generowanie CVV
      const cvv = Math.floor(100 + Math.random() * 900).toString();

      // Generowanie daty ważności (MM/YY)
      const month = String(Math.floor(1 + Math.random() * 12)).padStart(2, '0');
      const year = String(new Date().getFullYear() % 100 + Math.floor(Math.random() * 5) + 1); // Maksymalnie 5 lat do przodu
      const expiryDate = `${month}/${year}`;

      // Generowanie losowego adresu
      const streetNames = ['Main St', 'Oak Ave', 'Pine Rd', 'Maple Ln', 'Cedar Blvd'];
      const cities = ['Springfield', 'Rivertown', 'Hill Valley', 'Sunnydale', 'Elmwood'];
      const states = ['CA', 'NY', 'TX', 'FL', 'WA'];
      const streetNumber = Math.floor(1 + Math.random() * 9999);
      const streetName = streetNames[Math.floor(Math.random() * streetNames.length)];
      const city = cities[Math.floor(Math.random() * cities.length)];
      const state = states[Math.floor(Math.random() * states.length)];
      const zipCode = Math.floor(10000 + Math.random() * 90000);
      const address = `${streetNumber} ${streetName}, ${city}, ${state}, ${zipCode}`;

      // Wyświetlenie wyników
      const output = `
        Numer karty: ${cardNumber}
        CVV: ${cvv}
        Data ważności: ${expiryDate}
        Adres: ${address}
      `;
      document.getElementById('output').innerText = output;
    }

    function calculateLuhnCheckDigit(number) {
      let sum = 0;
      let shouldDouble = false;

      // Iteracja wstecz przez cyfry
      for (let i = number.length - 1; i >= 0; i--) {
        let digit = parseInt(number[i]);

        if (shouldDouble) {
          digit *= 2;
          if (digit > 9) digit -= 9;
        }

        sum += digit;
        shouldDouble = !shouldDouble;
      }

      return (10 - (sum % 10)) % 10;
    }
  </script>
</body>
</html>
